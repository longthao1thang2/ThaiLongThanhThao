<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long üíñ Th·∫£o - H√†nh Tr√¨nh K·∫πo Ng·ªçt</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Itim & Quicksand -->
    <link href="https://fonts.googleapis.com/css2?family=Itim&family=Quicksand:wght@500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <style>
        :root {
            --pink-main: #ff5c8a;
            --pink-light: #ff8fa3;
            --pink-bg: #fff0f3;
            --text-dark: #641220;
            --white-glass: rgba(255, 255, 255, 0.85);
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--pink-bg);
            color: var(--text-dark);
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: pointer;
        }

        .font-cute { font-family: 'Itim', cursive; }

        .bg-magic {
            background-color: var(--pink-bg);
            background-image: 
                radial-gradient(#ffb3c6 2px, transparent 2px),
                linear-gradient(180deg, #fff0f3 0%, #ffe5ec 100%);
            background-size: 30px 30px, 100% 100%;
            background-attachment: fixed;
        }

        /* ----- M√ÇY TR√îI ----- */
        .clouds-container {
            position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden;
        }
        .cloud {
            position: absolute; background: rgba(255, 255, 255, 0.6); border-radius: 200px;
            filter: blur(8px); animation: floatCloud linear infinite;
        }
        .cloud::before, .cloud::after {
            content: ''; position: absolute; background: rgba(255, 255, 255, 0.6); border-radius: 50%;
        }
        .cloud-1 { top: 10%; width: 120px; height: 40px; animation-duration: 40s; left: -150px; }
        .cloud-1::before { width: 50px; height: 50px; top: -20px; left: 15px; }
        .cloud-1::after { width: 40px; height: 40px; top: -15px; right: 20px; }
        
        .cloud-2 { top: 40%; width: 200px; height: 60px; animation-duration: 60s; left: -250px; opacity: 0.7;}
        .cloud-2::before { width: 80px; height: 80px; top: -40px; left: 30px; }
        .cloud-2::after { width: 60px; height: 60px; top: -20px; right: 30px; }

        @keyframes floatCloud {
            from { transform: translateX(0); }
            to { transform: translateX(120vw); }
        }

        /* ----- CHU·ªòT L·∫§P L√ÅNH & N·ªî TR√ÅI TIM ----- */
        .sparkle-trail {
            position: absolute; pointer-events: none; z-index: 9999;
            animation: fallAndFade 1s forwards cubic-bezier(0.1, 1, 0.3, 1);
            font-size: 14px;
        }
        @keyframes fallAndFade {
            0% { transform: scale(1) translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(0) translateY(30px) rotate(90deg); opacity: 0; }
        }

        .click-burst {
            position: absolute; pointer-events: none; z-index: 10000;
            transform: translate(-50%, -50%);
            animation: burstPop 0.8s forwards ease-out;
            font-size: 24px;
        }
        @keyframes burstPop {
            0% { transform: translate(-50%, -50%) scale(0.2); opacity: 1; }
            50% { transform: translate(-50%, -150%) scale(1.5); opacity: 0.8; }
            100% { transform: translate(-50%, -200%) scale(2); opacity: 0; }
        }

        /* ----- KH·ªêI GIAO DI·ªÜN ----- */
        .kawaii-card {
            background: var(--white-glass);
            backdrop-filter: blur(10px); border-radius: 40px; border: 4px solid #fff;
            box-shadow: 0 15px 35px rgba(255, 92, 138, 0.15), inset 0 -6px 0 rgba(255, 255, 255, 0.8);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .kawaii-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 45px rgba(255, 92, 138, 0.2), inset 0 -6px 0 rgba(255, 255, 255, 0.9);
        }

        .btn-jelly {
            background: linear-gradient(135deg, var(--pink-main), var(--pink-light));
            color: white; border-radius: 999px; font-weight: 800; font-size: 1.2rem;
            border: 3px solid white;
            box-shadow: 0 8px 0 #ff3366, 0 15px 20px rgba(255, 92, 138, 0.4);
            transition: all 0.1s; cursor: pointer; position: relative; overflow: hidden;
        }
        .btn-jelly:active {
            transform: translateY(8px);
            box-shadow: 0 0px 0 #ff3366, 0 5px 10px rgba(255, 92, 138, 0.3);
        }

        .input-cute {
            width: 100%; background: #fff; border: 3px solid #ffe5ec; border-radius: 25px; padding: 18px 24px;
            font-size: 1.2rem; font-weight: 700; color: var(--pink-main); text-align: center;
            transition: all 0.3s; outline: none; box-shadow: inset 0 4px 6px rgba(0,0,0,0.02);
        }
        .input-cute:focus {
            border-color: var(--pink-light); box-shadow: 0 0 0 6px rgba(255, 143, 163, 0.2); transform: scale(1.02);
        }
        .input-cute::placeholder { color: #ffccd5; font-weight: 600; font-family: 'Quicksand', sans-serif;}

        .timer-widget {
            background: white; border-radius: 30px; width: 110px; height: 120px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 15px 25px rgba(255, 92, 138, 0.1); border: 3px solid #fff;
            position: relative; overflow: hidden; transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .timer-widget:hover { transform: translateY(-10px) rotate(3deg); border-color: #ffb3c6; }
        .timer-widget::after {
            content: ''; position: absolute; top: 5px; right: 5px;
            width: 15px; height: 15px; background: rgba(255,255,255,0.8); border-radius: 50%;
        }

        /* ----- ƒêƒ®A THAN NH·∫†C ----- */
        .vinyl-player {
            position: fixed; bottom: 20px; left: 20px; z-index: 100;
            width: 60px; height: 60px; border-radius: 50%;
            background: #222; border: 4px solid #fff;
            box-shadow: 0 5px 15px rgba(255, 92, 138, 0.4);
            display: flex; align-items: center; justify-content: center;
            animation: spinVinyl 4s linear infinite; cursor: pointer;
        }
        .vinyl-player::before {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: var(--pink-main); border-radius: 50%; border: 3px solid #fff;
        }
        .vinyl-player::after {
            content: 'üéµ'; position: absolute; top: -15px; right: -15px; font-size: 20px;
            animation: floatNote 2s infinite alternate;
        }
        .vinyl-player.paused { animation-play-state: paused; }
        .vinyl-player.paused::after { display: none; }
        @keyframes spinVinyl { 100% { transform: rotate(360deg); } }
        @keyframes floatNote { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-10px) rotate(15deg); opacity: 0; } }

        /* ----- ·∫¢NH POLAROID ----- */
        .scrapbook-img {
            background: white; padding: 12px 12px 40px 12px;
            border-radius: 12px; box-shadow: 0 10px 20px rgba(0,0,0,0.06);
            position: relative; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            break-inside: avoid; margin-bottom: 30px; border: 1px solid #f0f0f0;
        }
        .scrapbook-img:hover {
            transform: scale(1.08) rotate(0deg) !important; z-index: 20; box-shadow: 0 20px 40px rgba(255, 92, 138, 0.25);
        }
        .img-container {
            width: 100%; border-radius: 8px; overflow: hidden; background: #ffe5ec;
        }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        
        .washi-tape {
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%) rotate(-3deg);
            width: 100px; height: 28px; background-color: #ffccd5;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.5) 5px, rgba(255,255,255,0.5) 10px);
            opacity: 0.9; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 2;
            mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 28" xmlns="http://www.w3.org/2000/svg"><path d="M0,2 Q2,0 4,2 T8,2 T12,2 T16,2 T20,2 T24,2 T28,2 T32,2 T36,2 T40,2 T44,2 T48,2 T52,2 T56,2 T60,2 T64,2 T68,2 T72,2 T76,2 T80,2 T84,2 T88,2 T92,2 T96,2 T100,2 L100,26 Q98,28 96,26 T92,26 T88,26 T84,26 T80,26 T76,26 T72,26 T68,26 T64,26 T60,26 T56,26 T52,26 T48,26 T44,26 T40,26 T36,26 T32,26 T28,26 T24,26 T20,26 T16,26 T12,26 T8,26 T4,26 T0,26 Z"/></svg>');
            mask-size: 100% 100%; -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 28" xmlns="http://www.w3.org/2000/svg"><path d="M0,2 Q2,0 4,2 T8,2 T12,2 T16,2 T20,2 T24,2 T28,2 T32,2 T36,2 T40,2 T44,2 T48,2 T52,2 T56,2 T60,2 T64,2 T68,2 T72,2 T76,2 T80,2 T84,2 T88,2 T92,2 T96,2 T100,2 L100,26 Q98,28 96,26 T92,26 T88,26 T84,26 T80,26 T76,26 T72,26 T68,26 T64,26 T60,26 T56,26 T52,26 T48,26 T44,26 T40,26 T36,26 T32,26 T28,26 T24,26 T20,26 T16,26 T12,26 T8,26 T4,26 T0,26 Z"/></svg>');
            -webkit-mask-size: 100% 100%;
        }

        /* ----- TH√îNG B√ÅO (TOAST) ----- */
        #cute-toast {
            position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%);
            background: white; padding: 14px 30px; border-radius: 999px;
            box-shadow: 0 10px 30px rgba(255, 92, 138, 0.3); border: 3px solid #ffb3c6;
            display: flex; align-items: center; gap: 10px; font-weight: 800; font-size: 1.1rem; color: var(--pink-main);
            transition: bottom 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); z-index: 9999;
        }
        #cute-toast.show { bottom: 40px; }

        .heart-beat { animation: heartbeat 1s infinite; display: inline-block; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 15%, 45% { transform: scale(1.25); } 30% { transform: scale(1); } }
        
        .hidden-section { display: none !important; }

        .sticker-badge {
            background: #ff5c8a; color: white; padding: 8px 24px; border-radius: 999px;
            font-family: 'Itim', cursive; font-size: 1.4rem; font-weight: 400;
            display: inline-flex; align-items: center; gap: 8px;
            box-shadow: 0 5px 15px rgba(255, 92, 138, 0.4); border: 2px dashed rgba(255,255,255,0.6);
            transform: rotate(-3deg);
        }
    </style>
</head>
<body class="bg-magic">

    <!-- B·∫¶U TR·ªúI M√ÇY TR√îI & HI·ªÜU ·ª®NG CHU·ªòT -->
    <div class="clouds-container">
        <div class="cloud cloud-1"></div>
        <div class="cloud cloud-2"></div>
    </div>
    <div id="cursor-effects-container"></div>

    <!-- N√∫t B·∫≠t/T·∫Øt Nh·∫°c -->
    <div id="vinyl-btn" class="vinyl-player" title="B·∫≠t/T·∫Øt Giai ƒêi·ªáu T√¨nh Y√™u"></div>

    <!-- Th√¥ng b√°o cute (T·ª± ƒë·ªông t·∫Øt sau 3s) -->
    <div id="cute-toast">
        <span class="text-2xl" id="toast-icon">ü™Ñ</span> <span id="toast-msg">ƒê√£ l∆∞u ·∫£nh nh√©!</span>
    </div>

    <!-- ================= 1. TRANG ƒêƒÇNG NH·∫¨P (·ªî KH√ìA T√åNH Y√äU) ================= -->
    <div id="login-section" class="min-h-screen flex items-center justify-center p-4 relative z-50">
        <div class="kawaii-card p-10 md:p-14 w-full max-w-[450px] text-center relative overflow-hidden">
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-yellow-100 rounded-full mix-blend-multiply filter blur-2xl opacity-70"></div>
            
            <div class="text-[5rem] mb-2 heart-beat drop-shadow-lg">üíå</div>
            
            <h1 class="font-cute text-5xl text-[#ff5c8a] mb-2 font-normal leading-tight">
                V∆∞∆°ng Qu·ªëc <br> C·ªßa Long & Th·∫£o
            </h1>
            <p class="font-bold text-[#ff8fa3] mb-10">Nh·∫≠p ƒë√∫ng m·∫≠t m√£ ƒë·ªÉ v√†o nha üçì</p>

            <div class="space-y-6">
                <div>
                    <input type="text" id="username" class="input-cute" placeholder="T√™n ƒë√¥i m√¨nh (VD: longthao)" autocomplete="off">
                </div>
                <div>
                    <input type="password" id="password" class="input-cute" placeholder="M·∫≠t m√£ (Ng√†y quen nhau)" autocomplete="off">
                </div>
                
                <div id="login-error" class="text-red-500 text-sm hidden font-bold">
                    Hong ƒë√∫ng r·ªìi, nh·∫≠p l·∫°i ƒëi n√®! ü•∫
                </div>
                
                <button onclick="handleLogin()" class="btn-jelly w-full py-4 mt-4">
                    M·ªü Kh√≥a Tr√°i Tim ‚ú®
                </button>
            </div>
        </div>
    </div>

    <!-- ================= 2. M√ÄN H√åNH CH·ªú (LOADING) ================= -->
    <div id="loading-section" class="hidden-section min-h-screen flex flex-col items-center justify-center relative z-50">
        <div class="text-[6rem] heart-beat mb-4 filter drop-shadow-[0_0_30px_rgba(255,92,138,0.5)]">ü™Ñ</div>
        <h2 class="font-cute text-5xl text-[#ff5c8a] mb-2">ƒêang h√≥a ph√©p...</h2>
        <div class="flex gap-2 mt-4">
            <div class="w-4 h-4 rounded-full bg-[#ff5c8a] animate-bounce"></div>
            <div class="w-4 h-4 rounded-full bg-[#ff8fa3] animate-bounce" style="animation-delay: 0.1s;"></div>
            <div class="w-4 h-4 rounded-full bg-[#ffb3c6] animate-bounce" style="animation-delay: 0.2s;"></div>
        </div>
    </div>

    <!-- ================= 3. TRANG CH√çNH ================= -->
    <div id="main-section" class="hidden-section relative z-10">
        
        <!-- Overlay t·∫£i ·∫£nh -->
        <div id="uploading-overlay" class="hidden-section fixed inset-0 bg-white/80 backdrop-blur-md z-[9998] flex flex-col items-center justify-center">
            <div class="text-7xl mb-4 heart-beat">üöÄ</div>
            <h3 class="font-cute text-4xl text-[#ff5c8a]">ƒêang c·∫•t ·∫£nh l√™n m√¢y...</h3>
        </div>

        <!-- PH·∫¶N HEADER -->
        <section class="min-h-screen flex flex-col items-center justify-center text-center p-4 pt-10">
            <div class="kawaii-card p-10 md:p-16 max-w-4xl w-full mx-auto relative mt-10">
                <div class="absolute -top-6 -left-6 text-5xl transform -rotate-12 animate-bounce">‚≠ê</div>
                <div class="absolute -bottom-6 -right-6 text-5xl transform rotate-12 animate-pulse">üå∑</div>

                <h1 class="font-cute text-6xl md:text-8xl text-[#641220] mb-6">
                    H·ªì Th√°i Long
                </h1>
                
                <div class="my-6">
                    <span class="sticker-badge">
                        ‚ú® ƒêang b√°m nhau v·ªõi ‚ú®
                    </span>
                </div>

                <h1 class="font-cute text-6xl md:text-8xl text-[#641220] mt-8 mb-8">
                    ƒêo√†n Th·ªã Thanh Th·∫£o
                </h1>
                
                <div class="bg-white/60 p-6 rounded-3xl border-2 border-dashed border-[#ffb3c6] max-w-2xl mx-auto">
                    <p class="font-semibold text-xl md:text-2xl text-[#ff5c8a] leading-relaxed">
                        "Tr√°i ƒë·∫•t c√≥ h∆°n 8 t·ª∑ ng∆∞·ªùi, nh∆∞ng Long ch·ªâ mu·ªën b√°m l·∫•y m·ªói m√¨nh Th·∫£o th√¥i. K·ªÉ t·ª´ ng√†y 01/02/2026, th·∫ø gi·ªõi n√†y t·ª± nhi√™n l·∫°i ƒë·∫πp ƒë·∫Ω v√† r·ª±c r·ª° ƒë·∫øn l·∫°! üçì"
                    </p>
                </div>
                
                <div class="mt-12">
                    <button onclick="document.getElementById('timer-section').scrollIntoView()" class="btn-jelly px-10 py-4 text-xl">
                        Xem T·ª•i M√¨nh ƒê√£ Quen Bao L√¢u üëá
                    </button>
                </div>
            </div>
        </section>

        <!-- PH·∫¶N ƒê·∫æM TH·ªúI GIAN -->
        <section id="timer-section" class="py-24 flex flex-col items-center justify-center px-4">
            <h2 class="font-cute text-5xl md:text-[4rem] text-[#ff5c8a] mb-12 text-center drop-shadow-sm">
                ƒê√£ b√°m nhau ƒë∆∞·ª£c... üß∏
            </h2>
            
            <div class="flex flex-wrap justify-center gap-5 md:gap-8 z-10">
                <div class="timer-widget">
                    <span id="days" class="font-cute text-5xl md:text-6xl text-[#ff5c8a] z-10">0</span>
                    <span class="text-sm font-bold text-[#ff8fa3] mt-2 z-10 uppercase tracking-widest">Ng√†y</span>
                </div>
                <div class="timer-widget">
                    <span id="hours" class="font-cute text-5xl md:text-6xl text-[#ff5c8a] z-10">0</span>
                    <span class="text-sm font-bold text-[#ff8fa3] mt-2 z-10 uppercase tracking-widest">Gi·ªù</span>
                </div>
                <div class="timer-widget">
                    <span id="minutes" class="font-cute text-5xl md:text-6xl text-[#ff5c8a] z-10">0</span>
                    <span class="text-sm font-bold text-[#ff8fa3] mt-2 z-10 uppercase tracking-widest">Ph√∫t</span>
                </div>
                <div class="timer-widget">
                    <span id="seconds" class="font-cute text-5xl md:text-6xl text-[#ff5c8a] z-10">0</span>
                    <span class="text-sm font-bold text-[#ff8fa3] mt-2 z-10 uppercase tracking-widest">Gi√¢y</span>
                </div>
            </div>
            
            <div class="mt-14 kawaii-card px-10 py-5 inline-block transform -rotate-2">
                <p class="font-bold text-[#641220] text-xl text-center">
                    C·ªôt m·ªëc ƒë√°ng nh·ªõ: <span class="text-[#ff5c8a] font-cute text-2xl ml-2">01.02.2026</span> üçí
                </p>
            </div>
        </section>

        <!-- PH√íNG TRANH NH·∫¨T K√ù -->
        <section class="py-24 flex flex-col items-center relative w-full px-4">
            <div class="kawaii-card p-10 max-w-5xl w-full text-center mb-12 border-dashed">
                <h2 class="font-cute text-5xl md:text-[4rem] text-[#ff5c8a] mb-4">G√≥c S·ªëng ·∫¢o C·ªßa Ch√∫ng M√¨nh üì∏</h2>
                <p class="font-bold text-[#ff8fa3] mb-8 text-xl">L∆∞u l·∫°i ·∫£nh ·ªü ƒë√¢y, m·ªçi ng∆∞·ªùi c√πng xem ƒë∆∞·ª£c nh√©!</p>
                
                <label for="photo-upload" class="cursor-pointer inline-flex items-center justify-center gap-3 btn-jelly py-4 px-10 text-xl w-full sm:w-auto">
                    <span class="text-3xl">üñºÔ∏è</span> 
                    <span>Treo Th√™m ·∫¢nh M·ªõi N√†o</span>
                </label>
                <input type="file" id="photo-upload" class="hidden" accept="image/*">
            </div>
            
            <!-- Khu v·ª±c hi·ªÉn th·ªã ·∫£nh -->
            <div id="polaroid-gallery" class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-8 max-w-[1400px] w-full px-4">
                <div id="empty-state" class="col-span-full text-center py-20">
                    <div class="text-[5rem] mb-4 animate-bounce">üì¶</div>
                    <p class="font-cute text-4xl text-[#ff8fa3]">Chi·∫øc h·ªôp k·ª∑ ni·ªám ƒëang tr·ªëng r·ªóng, h√£y √∫p ·∫£nh ƒëi nha!</p>
                </div>
            </div>
        </section>

        <!-- L·ªúI H·ª®A C·ª¶A LONG (L√Å TH∆Ø) -->
        <section class="py-24 flex flex-col items-center justify-center p-4 mb-20">
            <div class="bg-[#fffdf9] p-10 md:p-16 max-w-3xl w-full relative rounded-3xl shadow-[0_20px_50px_rgba(255,92,138,0.15)] border-[10px] border-white outline outline-4 outline-[#ffb3c6]">
                <div class="absolute top-6 right-6 w-16 h-20 bg-white border-2 border-dashed border-[#ff8fa3] p-1 flex items-center justify-center rotate-6 shadow-sm">
                    <span class="text-3xl">üå∏</span>
                </div>

                <h2 class="font-cute text-[3.5rem] text-[#ff5c8a] mb-8 font-normal text-center">B·ª©c Th∆∞ T√¨nh üìù</h2>
                
                <div class="font-semibold text-xl md:text-2xl text-[#641220] text-justify space-y-6 leading-relaxed">
                    <p>G·ª≠i b√© Th·∫£o ƒë√°ng y√™u nh·∫•t qu·∫£ ƒë·∫•t c·ªßa anh,</p>
                    <p>Ng∆∞·ªùi ta n√≥i b·∫Øt ƒë·∫ßu m·ªôt m·ªëi quan h·ªá th√¨ d·ªÖ, nh∆∞ng gi·ªØ ƒë∆∞·ª£c nhau m·ªõi kh√≥. Nh∆∞ng t·ª´ c√°i ng√†y 01/02/2026 ·∫•y, anh ƒë√£ bi·∫øt m√¨nh ch·∫≥ng mu·ªën ƒëi ƒë√¢u t√¨m ki·∫øm n·ªØa, v√¨ anh ƒë√£ "b√°m" tr√∫ng b·∫øn ƒë·ªó b√¨nh y√™n nh·∫•t r·ªìi üçì.</p>
                    <p>Anh h·ª©a s·∫Ω lu√¥n nh∆∞·ªùng nh·ªãn em (d√π ƒë√¥i khi em h∆°i ngang b∆∞·ªõng m·ªôt x√≠u), s·∫Ω lu√¥n n·∫Øm tay em qua nh·ªØng con ƒë∆∞·ªùng ƒë√¥ng ƒë√∫c, v√† s·∫Ω mua ƒë·ªì ƒÉn ngon cho em m·ªói khi em d·ªói üßã.</p>
                    <p>C·∫£m ∆°n Th·∫£o v√¨ ƒë√£ cho Long c∆° h·ªôi ƒë∆∞·ª£c b∆∞·ªõc v√†o cu·ªôc s·ªëng c·ªßa em. H√£y ƒë·ªÉ anh ti·∫øp t·ª•c "b√°m" l·∫•y em kh√¥ng ch·ªâ b√¢y gi·ªù, m√† l√† r·∫•t, r·∫•t l√¢u v·ªÅ sau n·ªØa nh√©! üíñ</p>
                </div>
                
                <div class="mt-12 text-right pr-4 pt-8 border-t-2 border-dashed border-[#ffe5ec]">
                    <p class="font-bold text-[#ff8fa3] text-sm mb-2 uppercase tracking-widest">Ng∆∞·ªùi t·ª± nguy·ªán b·ªã b√°m</p>
                    <p class="font-cute text-[3.5rem] text-[#ff5c8a] transform -rotate-6 mt-2">H·ªì Th√°i Long</p>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="text-center py-12 text-[#ff8fa3] font-bold text-lg">
            <p>X√¢y d·ª±ng b·∫±ng 100% t√¨nh y√™u v√† ph√©p thu·∫≠t ‚ú®</p>
            <p class="text-sm mt-2 opacity-80">K·ª∑ ni·ªám ƒë∆∞·ª£c c·∫•t gi·ªØ vƒ©nh vi·ªÖn tr√™n Cloud ƒê√°m M√¢y ‚òÅÔ∏è</p>
        </footer>

    </div>

    <script>
        // ================= BI·∫æN TO√ÄN C·ª§C & UI HELPERS =================
        let toastTimeout; // Bi·∫øn l∆∞u timeout ƒë·ªÉ reset khi click li√™n t·ª•c

        const showToast = (message, icon = "ü™Ñ") => {
            const toast = document.getElementById('cute-toast');
            document.getElementById('toast-msg').innerText = message;
            document.getElementById('toast-icon').innerText = icon;
            
            // X√≥a timeout c≈© n·∫øu th√¥ng b√°o tr∆∞·ªõc ƒë√≥ ch∆∞a k·ªãp t·∫Øt (gi√∫p click li√™n t·ª•c kh√¥ng b·ªã gi·∫≠t)
            if(toastTimeout) clearTimeout(toastTimeout);
            
            // Hi·ªán th√¥ng b√°o
            toast.classList.add('show');
            
            // T·∫Øt ch√≠nh x√°c sau 3 gi√¢y
            toastTimeout = setTimeout(() => {
                toast.classList.remove('show');
            }, 3000); // 3000ms = 3 gi√¢y
        };


        // ================= HI·ªÜU ·ª®NG CHU·ªòT L·∫§P L√ÅNH =================
        const cursorContainer = document.getElementById('cursor-effects-container');
        const sparkEmojis = ['‚ú®', '‚≠ê', 'üíñ', 'ü´ß'];
        let lastSparkTime = 0;

        document.addEventListener('mousemove', function(e) {
            const now = Date.now();
            if (now - lastSparkTime > 50) { 
                const spark = document.createElement('div');
                spark.className = 'sparkle-trail';
                spark.innerText = sparkEmojis[Math.floor(Math.random() * sparkEmojis.length)];
                spark.style.left = (e.pageX - 10) + 'px';
                spark.style.top = (e.pageY - 10) + 'px';
                cursorContainer.appendChild(spark);
                
                setTimeout(() => spark.remove(), 1000);
                lastSparkTime = now;
            }
        });


        // ================= HI·ªÜU ·ª®NG N·ªî TR√ÅI TIM KHI CLICK =================
        document.body.addEventListener('click', function(e) {
            if(e.target.tagName === 'INPUT' || e.target.closest('label') || e.target.closest('button') || e.target.id === 'vinyl-btn') return;

            const burstCount = 5; 
            for(let i=0; i<burstCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'click-burst';
                particle.innerText = ['‚ù§Ô∏è', 'üçì', 'üéÄ', 'üå∏'][Math.floor(Math.random()*4)];
                
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 50;
                particle.style.left = (e.pageX + Math.cos(angle)*distance) + 'px';
                particle.style.top = (e.pageY + Math.sin(angle)*distance) + 'px';
                particle.style.animationDuration = (0.5 + Math.random() * 0.5) + 's';
                
                cursorContainer.appendChild(particle);
                setTimeout(() => particle.remove(), 1000);
            }
        });


        // ================= ƒêƒ®A THAN NH·∫†C =================
        const vinylBtn = document.getElementById('vinyl-btn');
        let isPlaying = true;
        vinylBtn.addEventListener('click', () => {
            isPlaying = !isPlaying;
            if (isPlaying) {
                vinylBtn.classList.remove('paused');
                // Hi·ªán th√¥ng b√°o v√† t·∫Øt sau 3 gi√¢y
                showToast("ƒê√£ b·∫≠t nh·∫°c t√¨nh y√™u", "üéµ");
            } else {
                vinylBtn.classList.add('paused');
                // Hi·ªán th√¥ng b√°o v√† t·∫Øt sau 3 gi√¢y
                showToast("ƒê√£ t·∫Øt nh·∫°c", "ü§´");
            }
        });


        // ================= FIREBASE CLOUD SETUP (L∆ØU ·∫¢NH Vƒ®NH VI·ªÑN) =================
        let db, auth;
        const initFirebase = async () => {
            try {
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'long-thao-magic-app';
                
                if (!firebaseConfig) throw new Error("Missing Firebase Config");
                if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
                
                auth = firebase.auth();
                db = firebase.firestore();

                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await auth.signInWithCustomToken(__initial_auth_token);
                } else {
                    await auth.signInAnonymously();
                }

                auth.onAuthStateChanged((user) => {
                    if (user) listenToPhotos(appId);
                });

            } catch (error) {
                console.error("Firebase init failed:", error);
            }
        };


        // ================= APP LOGIC =================
        
        // 1. Logic ƒêƒÉng Nh·∫≠p
        window.handleLogin = function() {
            const user = document.getElementById('username').value.trim();
            const pass = document.getElementById('password').value.trim();
            const errorMsg = document.getElementById('login-error');

            if (user === 'longthao' && pass === '1thang2') {
                errorMsg.classList.add('hidden');
                document.getElementById('login-section').classList.add('hidden-section');
                document.getElementById('loading-section').classList.remove('hidden-section');

                initFirebase(); 

                setTimeout(() => {
                    document.getElementById('loading-section').classList.add('hidden-section');
                    document.getElementById('main-section').classList.remove('hidden-section');
                    startTimer(); 
                    
                    // Hi·ªán th√¥ng b√°o ch√†o m·ª´ng v√† t·ª± t·∫Øt sau 3 gi√¢y
                    showToast("Ch√†o m·ª´ng Long & Th·∫£o v·ªÅ nh√†", "ü•∞");
                }, 2500);
            } else {
                errorMsg.classList.remove('hidden');
                const card = document.querySelector('.kawaii-card');
                card.style.transform = 'scale(1) translateX(-15px)';
                setTimeout(() => card.style.transform = 'scale(1) translateX(15px)', 100);
                setTimeout(() => card.style.transform = 'scale(1) translateY(0)', 200);
            }
        }

        document.getElementById('password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleLogin();
        });


        // 2. Logic ƒê·∫øm Gi·ªù (T·ª´ 01/02/2026)
        function startTimer() {
            // L∆∞u √Ω: Ng√†y 01/02/2026 l√† sau th·ªùi ƒëi·ªÉm hi·ªán t·∫°i (nƒÉm 2026)
            // N·∫øu th·ªùi gian hi·ªán t·∫°i v·∫´n ch∆∞a t·ªõi ng√†y 01/02/2026, m√¨nh s·∫Ω hi·ªÉn th·ªã 0 ƒë·ªÉ kh√¥ng b·ªã s·ªë √¢m
            const startDate = new Date(2026, 1, 1, 0, 0, 0).getTime(); // 1 l√† Th√°ng 2 trong Javascript
            
            setInterval(() => {
                const now = new Date().getTime();
                const difference = now - startDate;
                
                // Tr√°nh l·ªói hi·ªÉn th·ªã s·ªë √¢m n·∫øu m·ªü trang tr∆∞·ªõc ng√†y 01/02/2026
                if (difference < 0) {
                    document.getElementById('days').innerText = "0";
                    document.getElementById('hours').innerText = "00";
                    document.getElementById('minutes').innerText = "00";
                    document.getElementById('seconds').innerText = "00";
                    return; 
                }
                
                document.getElementById('days').innerText = Math.floor(difference / (1000 * 60 * 60 * 24));
                document.getElementById('hours').innerText = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                document.getElementById('minutes').innerText = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                document.getElementById('seconds').innerText = Math.floor((difference % (1000 * 60)) / 1000).toString().padStart(2, '0');
            }, 1000);
        }


        // ================= CLOUD STORAGE LOGIC (·∫¢NH) =================
        function listenToPhotos(appId) {
            const collectionRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('photos');
            
            collectionRef.onSnapshot(snapshot => {
                const gallery = document.getElementById('polaroid-gallery');
                let photos = [];
                snapshot.forEach(doc => photos.push({ id: doc.id, ...doc.data() }));
                
                photos.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

                if (photos.length === 0) return;

                gallery.innerHTML = ''; 
                photos.forEach(photo => renderCutePhoto(photo.base64, photo.caption, gallery));
            }, error => console.error("L·ªói khi k√©o ·∫£nh:", error));
        }

        function renderCutePhoto(imgSrc, caption, container) {
            const div = document.createElement('div');
            const randomRotation = (Math.random() * 6 - 3).toFixed(1);
            
            div.className = `scrapbook-img`;
            div.style.transform = `rotate(${randomRotation}deg)`;
            
            div.innerHTML = `
                <div class="washi-tape"></div>
                <div class="img-container">
                    <img src="${imgSrc}" alt="K·ª∑ ni·ªám Long Th·∫£o" loading="lazy">
                </div>
                <div class="mt-5 text-center">
                    <p class="font-cute text-3xl text-[#ff5c8a]">${caption}</p>
                </div>
            `;
            container.appendChild(div);
        }

        const uploadInput = document.getElementById('photo-upload');
        const cuteCaptions = ["Kho·∫£nh kh·∫Øc c∆∞ng x·ªâu üíï", "Hai ƒë·ª©a m√¨nh n√® üçì", "Y√™u Th·∫£o nh·∫•t ‚ú®", "B√°m nhau m√£i nh√© ü´Ç", "Xinh g√°i qu√° ch·ª´ng üå∏", "ƒê√°ng iu gh√™ üòç", "Best couple üëë"];

        uploadInput.addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (!file || !file.type.startsWith('image/')) return;

            document.getElementById('uploading-overlay').classList.remove('hidden-section');

            try {
                const base64Data = await compressImage(file);
                
                if (auth && auth.currentUser) {
                    const appId = typeof __app_id !== 'undefined' ? __app_id : 'long-thao-magic-app';
                    const collectionRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('photos');
                    
                    await collectionRef.add({
                        base64: base64Data,
                        caption: cuteCaptions[Math.floor(Math.random() * cuteCaptions.length)],
                        timestamp: Date.now()
                    });
                    
                    // Hi·ªán th√¥ng b√°o up ·∫£nh v√† t·ª± t·∫Øt sau 3 gi√¢y
                    showToast("Ting ting! K·ª∑ ni·ªám ƒë√£ ƒë∆∞·ª£c c·∫•t gi·ªØ", "ü™Ñ");
                } else {
                    throw new Error("Kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c Cloud");
                }
            } catch (error) {
                console.error("L·ªói Upload:", error);
                showToast("L·ªói r√πi, th·ª≠ l·∫°i nha b√©", "ü•∫");
            } finally {
                document.getElementById('uploading-overlay').classList.add('hidden-section');
                uploadInput.value = '';
            }
        });

        function compressImage(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = event => {
                    const img = new Image();
                    img.src = event.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        const MAX_SIZE = 800;
                        let width = img.width, height = img.height;

                        if (width > height && width > MAX_SIZE) {
                            height *= MAX_SIZE / width; width = MAX_SIZE;
                        } else if (height > MAX_SIZE) {
                            width *= MAX_SIZE / height; height = MAX_SIZE;
                        }

                        canvas.width = width; canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        resolve(canvas.toDataURL('image/jpeg', 0.6));
                    };
                    img.onerror = reject;
                };
                reader.onerror = reject;
            });
        }
    </script>
</body>
</html>


